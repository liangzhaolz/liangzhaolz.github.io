---
title: "My notes on R Markdown"
subtitle: "I web, therefore I am (a spiderman). ----Xie et al., Preface of blogdown, 2021"
author: "Liang Zhao"
date: "December 2021"
output:
  html_document: default
  pdf_document: default
  word_document: default
description: This rmd file includes information on R Markdown installation and basic syntax, which can be used as a quick manual for writing rmd files. It also summarizes how R Markdown interacts with html, css and github pages.
---

# Part 1. R Markdown

R Markdown provides an authoring framework to generate replicable rmd. files embedded with codes, plots, and narrative texts. Using **Knit**, R Markdown documents can automatically render .rmd files in different formats, such as HTML, PDF, and Word, etc. 

Extensions of R Markdown can be used to write books with `bookdown` package and build websites with `blogdown` package.

The sources are free with [online tutorials](https://rmarkdown.rstudio.com/lesson-1.html) and [R Markdown guide](https://bookdown.org/yihui/rmarkdown/). There is also a [crash course for R Markdown](https://zsmith27.github.io/rmarkdown_crash-course/index.html). The following content is based on the these tutorials as my notes.

## Installation

First, you need to install the package called "rmarkdown" in RStudio and reload the package.

```{r, message=FALSE}
require(rmarkdown)
```

If you want to generate PDF output, you will need to install LaTeX. For R Markdown users who have not installed LaTeX before, we recommend that you install "TinyTeX" (https://yihui.name/tinytex/). For my current old version of RStudio, the package is "tinytex".

```{r, message=FALSE}
require(tinytex)
```

## Content

Notice that the file contains three types of content:

1. An (optional) YAML header surrounded by - - - s
    - YAML: Ain’t Markup Language
    - A YAML header contains YAML arguments, such as “title”, “author”, and “output”, demarcated by three dashes (—) on either end. See more [here](https://zsmith27.github.io/rmarkdown_crash-course/lesson-4-yaml-headers.html).
    - Remember that R’s TRUE, FALSE, and NULL are true, false, and null, respectively, in YAML. Character strings in YAML often do not require the quotes (e.g., dev: 'svg' and dev: svg are the same), unless they contain special characters, such as the colon :
  
2. R [code chunks] surrounded by ```s

3. [Text content] mixed with simple text formatting

### Code chunks

The R Markdown file can include code chunks. You can quickly insert chunks into your file with

- the keyboard shortcut Ctrl + Alt + I (OS X: Cmd + Option + I)
- the Add Chunk command in the editor toolbar: `Insert`
- or by typing the chunk delimiters ``` {r} 

When you render your .Rmd file, R Markdown will run each code chunk and embed the results beneath the code chunk in your final report.

#### Global options

Global options are options that apply to every chunk in your file. **knitr** will treat each option that you pass to `knitr::opts_chunk$set` as a global default that can be overwritten in individual chunk headers.

The following lines often come as the initial codes after YAML header and before other content.

```{r setup, include=TRUE}
knitr::opts_chunk$set(echo = TRUE)
```

#### Code chunk options

`{r, include = FALSE}` (no code or results) prevents code and results from appearing in the finished file. R Markdown still runs the code in the chunk, and the results can be used by other chunks. 

`{r, echo = FALSE}` (no code, but show results) prevents code, but not the results from appearing in the finished file. This is a useful way to embed figures. 

`{r, message = FALSE}` (only show the code, no messages) prevents messages that are generated by code from appearing in the finished file.

`{r, warning = FALSE}` prevents warnings that are generated by code from appearing in the finished.

`{r, fig.cap = "..."}` adds a caption to graphical results.

See https://yihui.org/knitr/options/ for more **knitr** options.

#### Inline code

Codes can be inserted directly into the text of a .Rmd file with Markdown formatting, by enclosing the code with `r`. E.g. `ggplot`

```{r}
myplotFunc <- "geom_bar( )"
```

Alternatively, you could create a specific text name (myplotFunc) for the function (e.g. `geom_bar`). Each time you refer to this function in the narrations, use `r myplotFunc` with `r `.

#### Code languages

Rmd file can execute code in other languages, such as bash and python. Simply to change {r} to {bash}.

### Text content

#### Markdown Basics

Format the text in your R Markdown file with Pandoc’s Markdown, a set of markup annotations for plain text files. When you render your file, Pandoc transforms the marked up text into formatted text in your final file format. 

Section headers can be written after a number of pound signs: #, ##, ###

- headings can be ordered with {-} after; the default is {.unnumbered}

Some inline formatting

- *italics*
- **bold**
- `code`
- [link to my google site](https://sites.google.com/york.ac.uk/liangzhao/home)
- link to sections within the rmd file, e.g. go to [code chunks] section in this file
- ![alt text/image] (path/image)
- ^[footnote] (this is a footnote)

Blockquotes are written after > "The quotes"

> "These are some quotes."

Note that a blank line must be inserted between plain text and lists/bullet points/quotes, otherwise they cannot be recognized.

See more about [R Markdown syntax](https://bookdown.org/yihui/rmarkdown/markdown-syntax.html) and [Pandoc's Markdown](https://pandoc.org/MANUAL.html#pandocs-markdown).

## Output files

### Basic process

When you run render, R Markdown feeds the .Rmd file to [knitr](https://yihui.org/knitr/), which executes all of the code chunks and creates a new markdown (.md) document which includes the code and its output.

The markdown file generated by **knitr** is then processed by [pandoc](https://pandoc.org) which is responsible for creating the finished format.

The above process can be simplified as:

Rmd file >> **knitr** >> md file >> *pandoc* >> output file 

R Markdown makes this process extremely simple by encapsulating all of the above processing into a single `render` function.

### Rendering output

There are several ways to output files. See more format options [here](https://rmarkdown.rstudio.com/lesson-9.html).

- Use the "output" argument in the YAML header

The "output" argument can be set as `output: html_document: default`. Replace `html_document` with `word_document` if you want to output a Word file. Then click **Knit** in the tool bar to output the file.

- Use `render` fucntion in the Console

Alternatively, you could use the `render` function and type directly in the Console pane. For example:

`render("RMarkdown_mynotes.Rmd", "html_document")`

## Other notes
### Parameters

You could add parameters (params: ) to YAML headers. For example, in between - - - and - - -, the parameter data is added to the headers

- title: "R Markdown my notes"
- output: html_document
- author: "L Zhao"
- date:"11/Dec/2021"
- params: 
  - data: "chengdu" (to specify which dataset to plot)

### Tables

By default, R Markdown displays data frames and matrixes as they would be in the R terminal (in a monospaced font). If you prefer that data be displayed with additional formatting you can use the `knitr::kable` function

```{r, message=FALSE}
require(knitr)
tableFunc <- "kable( )"
```

# Part 2. Websites

The short version of the guide can be found in the [R Markdown guide](https://rmarkdown.rstudio.com/lesson-13.html). For the full reference, please read [the official blogdown book](https://bookdown.org/yihui/rmarkdown/websites.html) by Xie, Hill, and Thomas (2017).

## Getting started

First, you need to install the package "blogdown" and reload the package.

```{r, message=FALSE}
require(blogdown)
```

The simplest way to building a website is to create a new project in RStudio. Following the instructions [here](https://bookdown.org/yihui/blogdown/a-quick-example.html).













